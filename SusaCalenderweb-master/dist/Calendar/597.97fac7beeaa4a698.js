"use strict";(self.webpackChunkCalendar=self.webpackChunkCalendar||[]).push([[597],{4597:(w,p,s)=>{s.r(p),s.d(p,{GoogleSingInModule:()=>k});var h=s(9808),l=s(8555),o=s(5e3),i=s(3075),m=s(591),u=s(5254),g=s(2321),I=s(520),f=s(8823);let S=(()=>{class t{constructor(e,n){this.http=e,this.fireauth=n,this.loggedIn=new m.X(!1),this.signInForm=new i.cw({userName:new i.NI("",i.kI.required),password:new i.NI("",i.kI.required)}),this.signUpForm=new i.cw({userName:new i.NI("",i.kI.required),email:new i.NI("",[i.kI.required,i.kI.email]),password:new i.NI("",i.kI.required),isVerified:new i.NI(!1)}),this.loginSuccessUrl=" https://susacalender.el.r.appspot.com/auth/login/success"}signin(e,n){return(0,u.D)((0,g.e5)(this.fireauth,e,n))}signupFirebase(e,n){return(0,u.D)((0,g.Xb)(this.fireauth,e,n))}forgotpassword(e){return(0,u.D)((0,g.LS)(this.fireauth,e))}logout(){return(0,u.D)(this.fireauth.signOut())}logIn(e){return console.log(e),this.http.post(" https://susacalender.el.r.appspot.com/api/user/login",e)}signUp(e){return console.log(e),this.http.post(" https://susacalender.el.r.appspot.com/api/user/signup",e)}signInWithGoogle(e){return this.http.post("https://identitytoolkit.googleapis.com/v1/accounts:signInWithIdp?key=AIzaSyCm7AMjhPrNrfkFgB8611uw72RaftLTT5w",{postBody:`id_token=${e}&providerId=google.com`,requestUri:"http://localhost:4200",returnIdpCredential:!0,returnSecureToken:!0})}getUsers(){return this.http.get(" https://susacalender.el.r.appspot.com/api/user/getall")}verifyUser(e,n){return this.http.post(` https://susacalender.el.r.appspot.com/api/user/update?id=${n}`,e)}removeUser(e){return this.http.post(" https://susacalender.el.r.appspot.com/api/user/remove",e)}updatePassword(e,n){return this.http.post(` https://susacalender.el.r.appspot.com/api/user/update?id=${n}`,e)}getLoginSuccessData(){return this.http.get(this.loginSuccessUrl)}removeUserFirebase(e){}}return t.\u0275fac=function(e){return new(e||t)(o.LFG(I.eN),o.LFG(f.gx))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var d=s(2211),v=s(9819),b=s(2599);const y=[{path:"login",component:(()=>{class t{constructor(e,n,c,r,G,C){this.signInService=e,this.router=n,this.snackbar=c,this.taskService=r,this.standupService=G,this.activatedRoute=C}ngOnInit(){localStorage.getItem("currUser")&&this.router.navigateByUrl("/dashboard")}onSignIn(){this.activatedRoute.queryParams.subscribe(e=>{console.log(e);const n=e.email;n?this.signInService.logIn({email:n}).subscribe({next:r=>{r.isVerified?this.processSuccessfulSignIn(r):(this.signInService.signInForm.reset(),this.showNotification("snackbar-danger","Account is Not Yet Verified!","bottom","center"))},error:r=>{console.error("Error during login:",r),this.showNotification("snackbar-danger","Provided Credential is Invalid!","bottom","center")}}):(console.error("No email found in URL parameters"),this.showNotification("snackbar-danger","No email found. Please log in again.","bottom","center"))})}processSuccessfulSignIn(e){this.signInService.signInForm.reset(),localStorage.setItem("currUser",JSON.stringify(e)),this.signInService.loggedIn.next(!0),this.router.navigateByUrl("/dashboard"),this.showNotification("snackbar-success","Sign In Successfully...!!!","bottom","center"),this.standupService.addStandups({name:e.userName,popupDate:"",tasks:[]}).subscribe(),this.taskService.addKanbanData({name:e.userName,sharedKanban:[],sharedKanbanData:[],kanbanFields:[]}).subscribe({error:r=>console.log(r)}),this.signInService.signupFirebase(e.email,e.password).subscribe({next:r=>console.log(r),error:r=>console.log(r)})}showNotification(e,n,c,r){this.snackbar.open(n,"",{duration:2e3,verticalPosition:c,horizontalPosition:r,panelClass:e})}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(S),o.Y36(l.F0),o.Y36(d.ux),o.Y36(v.C),o.Y36(b.K),o.Y36(l.gz))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-google-sig-in"]],decls:3,vars:0,consts:[[1,"container"],["mat-raised-button","","color","primary",1,"sign-in-button",3,"click"]],template:function(e,n){1&e&&(o.TgZ(0,"div",0)(1,"button",1),o.NdJ("click",function(){return n.onSignIn()}),o._uU(2," Go to ticket "),o.qZA()())},styles:[".container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh}.sign-in-button[_ngcontent-%COMP%]{font-size:16px;padding:10px 30px;border-radius:8px;box-shadow:0 4px 8px #0003}"]}),t})()}];let N=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[l.Bz.forChild(y)],l.Bz]}),t})(),k=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[h.ez,N,d.ZX]]}),t})()}}]);